library(lmerTest)
library(dplyr)

dataset <- read.csv('/Volumes/Scraplab/lindseytepfer/inarr/univariate_parcels/univariate_parcel_dataframe.csv')

results_df <- data.frame(parcel = numeric(),stringsAsFactors = FALSE)

for (i in 0:399) {

  filtered_parcel <- filter(dataset, parcel == i)
  
  model <- lmer(avg_column ~ silenced + (1 | sub) + (1 | clip:movie),
   data=filtered_parcel)
  
  coefs <- summary(model)$coefficients

  silenced_row <- coefs["silenced", ]

  new_row <- data.frame(
    t_value = silenced_row["t value"],
    stringsAsFactors = FALSE
  )

  results_df <- rbind(results_df, new_row)
}

write.csv(results_df, "/Users/lindseytepfer/Documents/phd/inarr/analysis/outputs/uncorrected_tvalues.csv", row.names = FALSE)